<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>FileHub - 文件上传与管理平台</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  
  <!-- 配置Tailwind自定义主题 -->
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#165DFF',
            secondary: '#36CFC9',
            neutral: '#F5F7FA',
            dark: '#1D2129',
            success: '#52C41A',
            warning: '#FAAD14',
            danger: '#FF4D4F'
          },
          fontFamily: {
            inter: ['Inter', 'system-ui', 'sans-serif'],
          },
        },
      }
    }
  </script>
  
  <style type="text/tailwindcss">
    @layer utilities {
      .content-auto {
        content-visibility: auto;
      }
      .transition-transform-opacity {
        transition-property: transform, opacity;
      }
      .drop-shadow-soft {
        filter: drop-shadow(0 4px 20px rgba(0, 0, 0, 0.08));
      }
      .scrollbar-hide::-webkit-scrollbar {
        display: none;
      }
      .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }
    }
  </style>
</head>

<body class="font-inter bg-gray-50 text-dark min-h-screen flex flex-col">
  <!-- 导航栏 -->
  <header class="bg-white shadow-sm sticky top-0 z-50 transition-all duration-300">
    <div class="container mx-auto px-4 py-4 flex items-center justify-between">
      <div class="flex items-center space-x-2">
        <div class="w-10 h-10 rounded-lg bg-primary flex items-center justify-center text-white">
          <<i class="fa fa-cloud-upload text-xl"></</i>
        </div>
        <h1 class="text-xl font-bold text-primary">FileHub</h1>
      </div>
      
      <div class="hidden md:flex items-center space-x-6">
        <a href="#" class="text-gray-600 hover:text-primary transition-colors">首页</a>
        <a href="#" class="text-gray-600 hover:text-primary transition-colors">我的文件</a>
        <a href="#" class="text-gray-600 hover:text-primary transition-colors">帮助中心</a>
      </div>
      
      <div class="flex items-center space-x-4">
        <button class="hidden md:block px-4 py-2 rounded-lg border border-primary text-primary hover:bg-primary/5 transition-colors">
          登录
        </button>
        <button class="px-4 py-2 rounded-lg bg-primary text-white hover:bg-primary/90 transition-colors shadow-sm">
          注册
        </button>
        <button class="md:hidden text-gray-600">
          <<i class="fa fa-bars text-xl"></</i>
        </button>
      </div>
    </div>
  </header>

  <!-- 主内容区 -->
  <main class="flex-grow container mx-auto px-4 py-8 md:py-16">
    <div class="max-w-4xl mx-auto">
      <!-- 页面标题 -->
      <div class="text-center mb-12">
        <h2 class="text-[clamp(1.5rem,3vw,2.5rem)] font-bold mb-4">简单高效的文件上传与管理</h2>
        <p class="text-gray-500 max-w-2xl mx-auto">支持多种文件格式批量上传，自定义分类管理，一键复制文件链接，轻松分享你的文件</p>
      </div>
      
      <!-- 上传区域 -->
      <div id="upload-area" class="border-2 border-dashed border-gray-300 rounded-2xl p-8 md:p-12 text-center mb-10 transition-all duration-300 hover:border-primary/50 bg-white shadow-sm">
        <div class="upload-icon mb-6 text-5xl text-gray-400">
          <<i class="fa fa-cloud text-primary/70"></</i>
        </div>
        
        <h3 class="text-xl font-semibold mb-2">拖放文件到此处上传</h3>
        <p class="text-gray-500 mb-6">或点击选择文件，支持批量上传</p>
        
        <label class="inline-block">
          <span class="px-6 py-3 bg-primary text-white rounded-lg cursor-pointer hover:bg-primary/90 transition-all duration-300 shadow-sm hover:shadow">
            <<i class="fa fa-folder-open mr-2"></</i>选择文件
          </span>
          <input type="file" id="file-input" multiple class="hidden" />
        </label>
        
        <p class="text-xs text-gray-400 mt-4">支持上传的格式：图片、文档、音频、视频等常见格式，单文件最大100MB</p>
      </div>
      
      <!-- 分类选择区 -->
      <div class="mb-10 bg-white rounded-xl p-6 shadow-sm">
        <div class="flex items-center justify-between mb-4">
          <h3 class="font-semibold text-lg">选择保存路径</h3>
          <button id="add-category" class="text-primary text-sm hover:text-primary/80 transition-colors">
            <<i class="fa fa-plus-circle mr-1"></</i> 新建分类
          </button>
        </div>
        
        <div class="relative">
          <select id="category-select" class="w-full px-4 py-3 rounded-lg border border-gray-300 appearance-none focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all">
            <option value="default">默认分类</option>
            <!-- 动态添加的分类将在这里显示 -->
          </select>
          <div class="absolute right-4 top-1/2 transform -translate-y-1/2 pointer-events-none text-gray-500">
            <<i class="fa fa-chevron-down"></</i>
          </div>
        </div>
      </div>
      
      <!-- 上传进度区 -->
      <div id="progress-container" class="hidden mb-10 bg-white rounded-xl p-6 shadow-sm">
        <h3 class="font-semibold text-lg mb-4">上传进度</h3>
        
        <div id="progress-list">
          <!-- 进度条将动态添加到这里 -->
        </div>
      </div>
      
      <!-- 已上传文件列表 -->
      <div id="files-container" class="bg-white rounded-xl p-6 shadow-sm">
        <h3 class="font-semibold text-lg mb-6">已上传文件</h3>
        
        <div id="files-list" class="space-y-4">
          <!-- 上传成功的文件将显示在这里 -->
          <div class="text-center text-gray-500 py-10">
            <<i class="fa fa-file-o text-4xl mb-3 opacity-30"></</i>
            <p>上传的文件将显示在这里</p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- 页脚 -->
  <footer class="bg-white border-t border-gray-200 py-8 mt-16">
    <div class="container mx-auto px-4">
      <div class="flex flex-col md:flex-row justify-between items-center">
        <div class="mb-4 md:mb-0">
          <p class="text-gray-500 text-sm">© 2023 FileHub. 保留所有权利</p>
        </div>
        
        <div class="flex space-x-6">
          <a href="#" class="text-gray-500 hover:text-primary transition-colors">
            <<i class="fa fa-github text-xl"></</i>
          </a>
          <a href="#" class="text-gray-500 hover:text-primary transition-colors">
            <<i class="fa fa-twitter text-xl"></</i>
          </a>
          <a href="#" class="text-gray-500 hover:text-primary transition-colors">
            <<i class="fa fa-envelope text-xl"></</i>
          </a>
        </div>
      </div>
    </div>
  </footer>

  <!-- 新建分类模态框 -->
  <div id="category-modal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50 hidden">
    <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4 transform transition-all duration-300 scale-95 opacity-0" id="modal-content">
      <h3 class="text-xl font-semibold mb-4">新建分类</h3>
      
      <div class="mb-4">
        <label for="category-name" class="block text-sm font-medium text-gray-700 mb-1">分类名称</label>
        <input type="text" id="category-name" class="w-full px-4 py-2 rounded-lg border border-gray-300 focus:outline-none focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all" placeholder="例如：工作文档">
      </div>
      
      <div class="flex justify-end space-x-3">
        <button id="cancel-category" class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">取消</button>
        <button id="save-category" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors">保存</button>
      </div>
    </div>
  </div>

  <!-- 通知提示 -->
  <div id="toast" class="fixed bottom-6 right-6 px-6 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 flex items-center">
    <<i id="toast-icon" class="mr-2"></</i>
    <span id="toast-message"></span>
  </div>

  <script>
    // 全局变量
    const fileInput = document.getElementById('file-input');
    const uploadArea = document.getElementById('upload-area');
    const progressContainer = document.getElementById('progress-container');
    const progressList = document.getElementById('progress-list');
    const filesList = document.getElementById('files-list');
    const categorySelect = document.getElementById('category-select');
    const addCategoryBtn = document.getElementById('add-category');
    const categoryModal = document.getElementById('category-modal');
    const modalContent = document.getElementById('modal-content');
    const cancelCategoryBtn = document.getElementById('cancel-category');
    const saveCategoryBtn = document.getElementById('save-category');
    const categoryNameInput = document.getElementById('category-name');
    const toast = document.getElementById('toast');
    const toastIcon = document.getElementById('toast-icon');
    const toastMessage = document.getElementById('toast-message');
    
    // 从本地存储加载分类
    let categories = JSON.parse(localStorage.getItem('fileCategories')) || ['默认分类'];
    
    // 初始化分类下拉菜单
    function initCategories() {
      // 清空现有选项
      categorySelect.innerHTML = '';
      
      // 添加所有分类
      categories.forEach(category => {
        const option = document.createElement('option');
        option.value = category.toLowerCase().replace(/\s+/g, '-');
        option.textContent = category;
        categorySelect.appendChild(option);
      });
    }
    
    // 显示通知提示
    function showToast(message, type = 'success') {
      toastMessage.textContent = message;
      
      // 设置图标和样式
      if (type === 'success') {
        toastIcon.className = 'fa fa-check-circle text-success';
        toast.className = 'fixed bottom-6 right-6 px-6 py-3 rounded-lg shadow-lg bg-white text-success transform translate-y-0 opacity-100 transition-all duration-300 flex items-center';
      } else if (type === 'error') {
        toastIcon.className = 'fa fa-exclamation-circle text-danger';
        toast.className = 'fixed bottom-6 right-6 px-6 py-3 rounded-lg shadow-lg bg-white text-danger transform translate-y-0 opacity-100 transition-all duration-300 flex items-center';
      } else if (type === 'info') {
        toastIcon.className = 'fa fa-info-circle text-primary';
        toast.className = 'fixed bottom-6 right-6 px-6 py-3 rounded-lg shadow-lg bg-white text-primary transform translate-y-0 opacity-100 transition-all duration-300 flex items-center';
      }
      
      // 3秒后隐藏
      setTimeout(() => {
        toast.className = 'fixed bottom-6 right-6 px-6 py-3 rounded-lg shadow-lg transform translate-y-20 opacity-0 transition-all duration-300 flex items-center';
      }, 3000);
    }
    
    // 显示模态框
    function showModal() {
      categoryModal.classList.remove('hidden');
      // 触发重排后添加动画类
      setTimeout(() => {
        modalContent.classList.remove('scale-95', 'opacity-0');
        modalContent.classList.add('scale-100', 'opacity-100');
      }, 10);
      categoryNameInput.focus();
    }
    
    // 隐藏模态框
    function hideModal() {
      modalContent.classList.remove('scale-100', 'opacity-100');
      modalContent.classList.add('scale-95', 'opacity-0');
      setTimeout(() => {
        categoryModal.classList.add('hidden');
        categoryNameInput.value = '';
      }, 300);
    }
    
    // 添加新分类
    function addCategory(name) {
      if (!name || categories.includes(name)) return false;
      
      categories.push(name);
      localStorage.setItem('fileCategories', JSON.stringify(categories));
      initCategories();
      return true;
    }
    
    // 处理文件上传
    function handleFiles(files) {
      if (!files.length) return;
      
      // 显示进度容器
      progressContainer.classList.remove('hidden');
      
      // 清空"无文件"提示
      if (filesList.querySelector('.text-center')) {
        filesList.innerHTML = '';
      }
      
      // 为每个文件创建进度条并模拟上传
      Array.from(files).forEach(file => {
        const fileId = 'file-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        const fileName = file.name;
        const fileSize = (file.size / (1024 * 1024)).toFixed(2); // MB
        
        // 创建进度条元素
        const progressItem = document.createElement('div');
        progressItem.className = 'mb-4';
        progressItem.innerHTML = `
          <div class="flex justify-between mb-1">
            <span class="text-sm font-medium truncate max-w-[70%]">${fileName}</span>
            <span class="text-sm text-gray-500">${fileSize} MB</span>
          </div>
          <div class="w-full bg-gray-200 rounded-full h-2.5">
            <div id="${fileId}-progress" class="bg-primary h-2.5 rounded-full transition-all duration-300" style="width: 0%"></div>
          </div>
        `;
        
        progressList.appendChild(progressItem);
        
        // 模拟上传进度
        simulateUpload(fileId, file);
      });
    }
    
    // 模拟上传进度
    function simulateUpload(fileId, file) {
      const progressBar = document.getElementById(`${fileId}-progress`);
      let progress = 0;
      const interval = setInterval(() => {
        // 随机增加进度，模拟网络波动
        progress += Math.random() * 10;
        if (progress >= 100) {
          progress = 100;
          clearInterval(interval);
          
          // 上传完成后，添加到文件列表
          setTimeout(() => {
            addFileToFilesList(fileId, file);
            // 移除进度条
            progressBar.parentElement.parentElement.remove();
            
            // 如果没有进度条了，隐藏进度容器
            if (!progressList.children.length) {
              progressContainer.classList.add('hidden');
            }
            
            showToast('文件上传成功');
          }, 500);
        }
        
        progressBar.style.width = `${progress}%`;
      }, 300);
    }
    
    // 将文件添加到已上传列表
    function addFileToFilesList(fileId, file) {
      const fileName = file.name;
      const
