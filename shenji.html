<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>è´¦å·å‡çº§ç³»ç»Ÿ</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* main.css å†…å®¹ */
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
}
body{
    font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,Arial,sans-serif;
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:20px;
    overflow-x:hidden;
    transition:background 0.5s ease;
}

.container{
    background:white;
    border-radius:20px;
    padding:40px 30px;
    width:100%;
    max-width:350px;
    box-shadow:0 10px 30px rgba(0,0,0,.2);
    position:relative;
    display: flex;
    flex-direction: column;
}

/* ä¸»é¢˜é¢œè‰²é€‰æ‹©å™¨æ ·å¼ - å¯æ”¶çº³å±•å¼€ */
.theme-toggle {
    color: #666;
    font-size: 14px;
    cursor: pointer;
    text-align: center;
    margin-top: 5px;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 5px;
    transition: color 0.3s;
}
.theme-toggle:hover {
    color: #667eea;
}
/* ä¸»é¢˜é¢œè‰²é€‰æ‹©å™¨çš„å›¾æ ‡æ—‹è½¬åŠ¨ç”» */
.theme-toggle i {
    transition: transform 0.3s ease;
}
.theme-toggle.expanded i {
    transform: rotate(180deg);
}

.theme-selector {
    margin-top: 10px;
    padding: 15px;
    border-radius: 10px;
    background-color: #f9f9f9;
    display: none; /* é»˜è®¤éšè— */
}
.theme-selector.show {
    display: block;
    animation: fadeIn 0.3s ease;
}
@keyframes fadeIn {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
}

.theme-title {
    color: #666;
    font-size: 13px;
    margin-bottom: 8px;
    text-align: center;
}
.theme-colors {
    display: flex;
    justify-content: center;
    gap: 10px;
    flex-wrap: wrap;
}
.theme-color {
    width: 26px;
    height: 26px;
    border-radius: 50%;
    cursor: pointer;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    border: 2px solid transparent;
}
.theme-color:hover {
    transform: scale(1.2);
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
}
.theme-color.active {
    border-color: #333;
    transform: scale(1.1);
}

.referer{
    position:absolute;
    top:10px;
    left:15px;
    font-size:14px;
    color:#555;
}
.referer input{
    background:transparent;
    border:none;
    outline:none;
    width:70px;
    font-weight:bold;
    transition: color 0.3s;
}

.game-icon{
    width:100px;
    height:100px;
    border-radius:50%;
    background:#f0f0f0;
    margin:30px auto 15px;
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
    overflow:hidden;
    cursor:pointer;
    border:2px dashed #ccc;
    transition:transform .3s,box-shadow .3s;
    animation:float 1.5s ease-in-out infinite alternate;
}
.game-icon:hover{
    transform:translateY(-5px);
    box-shadow:0 8px 20px rgba(102,126,234,.4);
}
@keyframes float{
    0%{transform:translateY(-5px);}
    100%{transform:translateY(5px);}
}
.game-icon img{
    width:100%;
    height:100%;
    object-fit:cover;
}
#avatarInput{display:none;}
.game-name-input{
    text-align:center;
    font-size:20px;
    font-weight:bold;
    color:#333;
    margin-bottom:25px;
    background:transparent;
    border:none;
    outline:none;
    width:100%;
}
.game-name-input::placeholder{color:#999;}

/* è¾“å…¥æ¡†åŸºç¡€æ ·å¼ */
.input-group{
    margin-bottom:20px;
    position: relative;
}
.input-group label{
    display:block;
    margin-bottom:8px;
    color:#555;
    font-size:14px;
    transition: color 0.3s;
}
/* è¾“å…¥æ¡†å®¹å™¨ */
.input-wrapper {
    position: relative;
    border-radius: 8px;
    overflow: hidden;
    transition: all 0.3s ease;
}
/* è¾“å…¥æ¡†æ ·å¼ */
.input-wrapper input {
    width: 100%;
    padding: 14px 16px;
    font-size: 16px;
    border: none;
    background-color: #f8fafc;
    transition: all 0.3s ease;
    z-index: 2;
    position: relative;
}
.input-wrapper input:focus {
    outline: none;
    box-shadow: none;
}
/* è¾“å…¥æ¡†åº•éƒ¨è£…é¥°çº¿ */
.input-line {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    height: 2px;
    background-color: #e2e8f0;
    transition: all 0.3s ease;
    z-index: 1;
}
/* è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶çš„åº•éƒ¨è£…é¥°çº¿åŠ¨ç”» */
.input-wrapper:focus-within .input-line {
    height: 3px;
    transform: translateX(0);
}
/* è¾“å…¥æ¡†è·å¾—ç„¦ç‚¹æ—¶çš„èƒŒæ™¯å˜åŒ– */
.input-wrapper:focus-within {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
}

.upgrade-btn{
    width:100%;
    padding:15px;
    color:white;
    border:none;
    border-radius:8px;
    font-size:16px;
    font-weight:bold;
    cursor:pointer;
    transition:all .3s;
    position:relative;
    margin-bottom:25px;
}

.upgrade-btn:hover:not(:disabled){transform:translateY(-2px);}
.upgrade-btn:disabled{opacity:.7;cursor:not-allowed;}
.loading-dots::after{
    content:'';
    display:inline-block;
    width:20px;
    height:20px;
    border:3px solid #ffffff33;
    border-top-color:#fff;
    border-radius:50%;
    animation:spin 1s linear infinite;
    margin-left:8px;
    vertical-align:middle;
}
@keyframes spin{to{transform:rotate(360deg);}}
.datetime-container{
    text-align:center;
    margin-top:auto;
    padding-top:15px;
    min-height:16px;
}
.datetime{
    color:#666;
    font-size:13px;
    cursor:pointer;
    transition:color 0.3s;
}
.datetime:hover{
    color:#667eea;
}
.system-title{
    text-align:center;
    color:#666;
    font-size:14px;
    margin-top:5px;
}
.privileges{
    text-align:center;
    color:#666;
    font-size:14px;
    margin-top:5px;
}
.privileges i{
    color:#667eea;
    margin-right:5px;
}

.success-page{display:none;text-align:center;}
.success-icon-wrap{
    width:100px;
    height:100px;
    border-radius:50%;
    margin:0 auto 20px;
    box-shadow:0 4px 15px rgba(0,0,0,.15);
    overflow:hidden;
    animation:float 1.5s ease-in-out infinite alternate;
}
.success-icon-wrap img{
    width:100%;
    height:100%;
    object-fit:cover;
}
.success-title{font-size:22px;color:#333;margin-bottom:20px;font-weight:bold;}

/* ç‰¹æƒåŒºåŸŸåŸºç¡€æ ·å¼ */
.benefit-box{
    border-radius:16px;
    padding:18px 22px;
    margin:25px auto;
    font-size:16px;
    line-height:2.2;
    text-align:left;
    width:fit-content;
    max-width:100%;
    box-shadow:0 4px 10px rgba(0,0,0,0.15);
}
.benefit-box strong,
.benefit-box span {
    font-weight: bold;
    text-shadow: 0 0 2px rgba(255, 255, 255, 0.7);
}

.back-btn{
    margin-top:30px;
    padding:12px 30px;
    background:#f0f0f0;
    color:#666;
    border:none;
    border-radius:8px;
    font-size:14px;
    cursor:pointer;
    transition: all 0.3s;
}
.back-btn:hover{
    transform: translateY(-2px);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

/* å½©å¸¦æ•ˆæœ */
.confetti {
    position: fixed;
    opacity: 0;
    top: -20px;
    animation: confetti-fall 1.8s ease-in-out forwards;
    z-index: 1000;
    pointer-events: none;
    box-shadow: 0 0 6px rgba(0,0,0,0.2);
}

.confetti.rectangle {
    width: 12px;
    height: 6px;
}

.confetti.circle {
    width: 8px;
    height: 8px;
    border-radius: 50%;
}

.confetti.diamond {
    width: 8px;
    height: 8px;
    transform: rotate(45deg);
}

@keyframes confetti-fall {
    0% {
        transform: translateY(0) rotate(0deg) scale(1);
        opacity: 1;
    }
    70% {
        opacity: 1;
    }
    100% {
        transform: translateY(100vh) rotate(1080deg) scale(0.8);
        opacity: 0;
    }
}

/* themes.css å†…å®¹ */
/* çº¢è‰²ä¸»é¢˜ */
body.theme-red {
    background:linear-gradient(135deg,#ff416c 0%,#ff4b2b 100%);
}
body.theme-red .upgrade-btn {
    background:linear-gradient(135deg,#ff416c 0%,#ff4b2b 100%);
}
body.theme-red .input-wrapper input {
    background-color: #fff5f5;
}
body.theme-red .input-line {
    background-color: #fecaca;
}
body.theme-red .input-wrapper:focus-within .input-line {
    background-color: #ff416c;
}
body.theme-red .input-group label {
    color: #e53e3e;
}
body.theme-red .privileges i,
body.theme-red .theme-toggle:hover,
body.theme-red .referer input,
body.theme-red .datetime:hover {
    color:#ff416c;
}
body.theme-red .benefit-box {
    background:linear-gradient(135deg, #ffebee 0%, #fce4e7 100%);
}
body.theme-red .benefit-box strong,
body.theme-red .benefit-box span {
    color:#d32f2f;
}

/* æ©™è‰²ä¸»é¢˜ */
body.theme-orange {
    background:linear-gradient(135deg,#ff9966 0%,#ff5e62 100%);
}
body.theme-orange .upgrade-btn {
    background:linear-gradient(135deg,#ff9966 0%,#ff5e62 100%);
}
body.theme-orange .input-wrapper input {
    background-color: #fff7ed;
}
body.theme-orange .input-line {
    background-color: #fed7d7;
}
body.theme-orange .input-wrapper:focus-within .input-line {
    background-color: #ff9966;
}
body.theme-orange .input-group label {
    color: #dd6b20;
}
body.theme-orange .privileges i,
body.theme-orange .theme-toggle:hover,
body.theme-orange .referer input,
body.theme-orange .datetime:hover {
    color:#ff9966;
}
body.theme-orange .benefit-box {
    background:linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
}
body.theme-orange .benefit-box strong,
body.theme-orange .benefit-box span {
    color:#e65100;
}

/* è“è‰²ä¸»é¢˜ï¼ˆé»˜è®¤ï¼‰ */
body.theme-blue {
    background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
}
body.theme-blue .upgrade-btn {
    background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);
}
body.theme-blue .input-wrapper input {
    background-color: #edf2f7;
}
body.theme-blue .input-line {
    background-color: #cbd5e0;
}
body.theme-blue .input-wrapper:focus-within .input-line {
    background-color: #667eea;
}
body.theme-blue .input-group label {
    color: #4a5568;
}
body.theme-blue .privileges i,
body.theme-blue .theme-toggle:hover,
body.theme-blue .referer input,
body.theme-blue .datetime:hover {
    color:#667eea;
}
body.theme-blue .benefit-box {
    background:linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
}
body.theme-blue .benefit-box strong,
body.theme-blue .benefit-box span {
    color:#1565c0;
}

/* ç»¿è‰²ä¸»é¢˜ */
body.theme-green {
    background:linear-gradient(135deg,#43e97b 0%,#38f9d7 100%);
}
body.theme-green .upgrade-btn {
    background:linear-gradient(135deg,#43e97b 0%,#38f9d7 100%);
}
body.theme-green .input-wrapper input {
    background-color: #f0fff4;
}
body.theme-green .input-line {
    background-color: #c6f6d5;
}
body.theme-green .input-wrapper:focus-within .input-line {
    background-color: #43e97b;
}
body.theme-green .input-group label {
    color: #2e7d32;
}
body.theme-green .privileges i,
body.theme-green .theme-toggle:hover,
body.theme-green .referer input,
body.theme-green .datetime:hover {
    color:#43e97b;
}
body.theme-green .benefit-box {
    background:linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
}
body.theme-green .benefit-box strong,
body.theme-green .benefit-box span {
    color:#2e7d32;
}

/* é»‘è‰²ä¸»é¢˜ */
body.theme-black {
    background:linear-gradient(135deg,#141e30 0%,#243b55 100%);
}
body.theme-black .upgrade-btn {
    background:linear-gradient(135deg,#3a6073 0%,#16222a 100%);
}
/* é»‘è‰²ä¸»é¢˜è¾“å…¥æ¡†è°ƒæ•´ä¸ºæŸ”å’Œç°è‰²ç³» */
body.theme-black .input-wrapper input {
    background-color: #e5e7eb; /* æµ…ç°è‰²èƒŒæ™¯ï¼Œé™ä½çªå…€æ„Ÿ */
    color: #1f2937; /* æ·±ç°è‰²æ–‡å­—ä¿æŒæ¸…æ™°å¯è¯» */
}
body.theme-black .input-wrapper input::placeholder {
    color: #6b7280; /* ä¸­ç­‰ç°è‰²å ä½ç¬¦ */
}
body.theme-black .input-line {
    background-color: #9ca3af; /* åè°ƒçš„æµ…ç°åº•çº¿ */
}
body.theme-black .input-wrapper:focus-within .input-line {
    background-color: #38f9d7; /* ä¿æŒä¸»é¢˜ç‰¹è‰²çš„ç„¦ç‚¹é¢œè‰² */
}
body.theme-black .input-group label {
    color: #4b5563; /* ä¸æµ…ç°è¾“å…¥æ¡†åè°ƒçš„æ ‡ç­¾é¢œè‰² */
}
body.theme-black .privileges i,
body.theme-black .theme-toggle:hover,
body.theme-black .referer input,
body.theme-black .datetime:hover {
    color:#38f9d7;
}
body.theme-black .benefit-box {
    background:linear-gradient(135deg, #263238 0%, #37474f 100%);
}
body.theme-black .benefit-box strong,
body.theme-black .benefit-box span {
    color:#b2ebf2;
    text-shadow: 0 0 2px rgba(0, 0, 0, 0.7);
}

/* ç²‰è‰²ä¸»é¢˜ */
body.theme-pink {
    background:linear-gradient(135deg,#ff9a9e 0%,#fad0c4 99%,#fad0c4 100%);
}
body.theme-pink .upgrade-btn {
    background:linear-gradient(135deg,#ff9a9e 0%,#fad0c4 99%,#fad0c4 100%);
}
body.theme-pink .input-wrapper input {
    background-color: #fff0f6;
}
body.theme-pink .input-line {
    background-color: #feb2c7;
}
body.theme-pink .input-wrapper:focus-within .input-line {
    background-color: #ff9a9e;
}
body.theme-pink .input-group label {
    color: #d64045;
}
body.theme-pink .privileges i,
body.theme-pink .theme-toggle:hover,
body.theme-pink .referer input,
body.theme-pink .datetime:hover {
    color:#ff9a9e;
}
body.theme-pink .benefit-box {
    background:linear-gradient(135deg, #fce4ec 0%, #f8bbd0 100%);
}
body.theme-pink .benefit-box strong,
body.theme-pink .benefit-box span {
    color:#c2185b;
}
</style>
</head>
<body class="theme-blue">
<div class="container">
    <div class="main-page" id="mainPage">
        <div class="referer">
            ä¸“å±æ¨èå®˜ï¼š<input id="refererInput" value="xxx" maxlength="6" oninput="saveReferer()">
        </div>

        <label for="avatarInput">
            <div class="game-icon">
                <img id="avatarPreview" style="display:none"/>
                <span id="uploadHint" style="color:#999;font-size:12px;">ç‚¹å‡»ä¸Šä¼ å¤´åƒ</span>
            </div>
        </label>
        <input type="file" id="avatarInput" accept="image/*" onchange="previewAvatar(event)">

        <input type="text" class="game-name-input" id="gameNameInput" placeholder="ç‚¹å‡»ä¿®æ”¹æ¸¸æˆåç§°" value="ä¼ å¥‡å°æ¸¸æˆ" maxlength="10" oninput="saveGameName()">

        <div class="input-group">
            <label>è¯·è¾“å…¥IDï¼š</label>
            <div class="input-wrapper">
                <input type="text" id="gameId" placeholder="è¯·è¾“å…¥å‡çº§è´¦å·" maxlength="20">
                <div class="input-line"></div>
            </div>
        </div>

        <button class="upgrade-btn" id="upgradeBtn" onclick="upgradeAccount()">ç¡®è®¤å‡çº§</button>
        
        <div class="system-title">è´¦å·å‡çº§ç³»ç»Ÿ</div>
        <div class="privileges"><i class="fas fa-star"></i>ä¸“å±æ ‡è¯†ï¼Œé«˜çº§ç‰¹æƒ</div>
        
        <!-- ä¸»é¢˜é¢œè‰²é€‰æ‹©å™¨ï¼ˆå¯æ”¶çº³å±•å¼€ï¼‰ -->
        <div class="theme-toggle" onclick="toggleThemeSelector()">
            <span>ä¸»é¢˜é¢œè‰²</span>
            <i class="fas fa-chevron-down"></i>
        </div>
        <div class="theme-selector">
            <div class="theme-title">é€‰æ‹©ä¸»é¢˜è‰²</div>
            <div class="theme-colors">
                <div class="theme-color" style="background:linear-gradient(135deg,#ff416c 0%,#ff4b2b 100%);" data-theme="red"></div>
                <div class="theme-color" style="background:linear-gradient(135deg,#ff9966 0%,#ff5e62 100%);" data-theme="orange"></div>
                <div class="theme-color active" style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);" data-theme="blue"></div>
                <div class="theme-color" style="background:linear-gradient(135deg,#43e97b 0%,#38f9d7 100%);" data-theme="green"></div>
                <div class="theme-color" style="background:linear-gradient(135deg,#141e30 0%,#243b55 100%);" data-theme="black"></div>
                <div class="theme-color" style="background:linear-gradient(135deg,#ff9a9e 0%,#fad0c4 99%,#fad0c4 100%);" data-theme="pink"></div>
            </div>
        </div>
        
        <div class="datetime-container" onclick="toggleDateTime()">
            <div class="datetime" id="datetime"></div>
        </div>
    </div>

    <div class="success-page" id="successPage">
        <div class="success-icon-wrap">
            <img id="successAvatar" src="" alt="å¤´åƒ">
        </div>
        <div class="success-title">å‡çº§æˆåŠŸï¼</div>
        <p style="color:#666;margin-bottom:5px;" id="successText">å·²å°†<strong></strong>æˆåŠŸå‡çº§ä¸ºå†…æµ‹è´¦å·</p>

        <div class="benefit-box">
            âœ¨ <span>ä»»åŠ¡å¥–åŠ±ç¿»å€</span><br>
            ğŸ’° <span>ä¸“å±æç°ç§’åˆ°è´¦</span><br>
            ğŸ¯ <span>è¾¾é‡å…å¹¿å‘Š (0/40)</span>
        </div>

        <button class="back-btn" onclick="backToMain()">è¿”å›é¦–é¡µ</button>
    </div>
</div>

<script>
// main.js å†…å®¹
// é¡µé¢åŠ è½½æ—¶ä»æœ¬åœ°å­˜å‚¨æ¢å¤æ•°æ®
window.addEventListener('load', function() {
    loadSavedData();
    initThemeSelector();
    initDateTime();
});

// åˆå§‹åŒ–æ—¥æœŸæ—¶é—´æ˜¾ç¤º
function initDateTime() {
    updateDateTime();
    setInterval(updateDateTime, 1000);
}

// æ—¥æœŸæ—¶é—´æ˜¾ç¤ºæ›´æ–°
function updateDateTime(){
    const now = new Date();
    const str = now.toLocaleString('zh-CN',{year:'numeric',month:'long',day:'numeric',hour:'2-digit',minute:'2-digit',second:'2-digit'});
    const datetimeEl = document.getElementById('datetime');
    datetimeEl.textContent = str;
    datetimeEl.style.display = window.dateTimeVisible !== false ? 'block' : 'none';
}

// ä¿å­˜æ¨èå®˜ä¿¡æ¯åˆ°æœ¬åœ°å­˜å‚¨
function saveReferer() {
    const referer = document.getElementById('refererInput').value.trim();
    localStorage.setItem('referer', referer);
}

// ä¿å­˜æ¸¸æˆåç§°åˆ°æœ¬åœ°å­˜å‚¨
function saveGameName() {
    const gameName = document.getElementById('gameNameInput').value.trim();
    if (gameName) {
        localStorage.setItem('gameName', gameName);
    }
}

// å¤´åƒé¢„è§ˆå¹¶ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
function previewAvatar(e){
    const file = e.target.files[0];
    if(file){
        const reader = new FileReader();
        reader.onload = function(evt){
            const url = evt.target.result;
            // æ˜¾ç¤ºå¤´åƒ
            document.getElementById('avatarPreview').src = url;
            document.getElementById('avatarPreview').style.display = 'block';
            document.getElementById('uploadHint').style.display = 'none';
            document.getElementById('successAvatar').src = url;
            
            // ä¿å­˜å¤´åƒåˆ°æœ¬åœ°å­˜å‚¨
            localStorage.setItem('avatarUrl', url);
        };
        reader.readAsDataURL(file);
    }
}

// ä»æœ¬åœ°å­˜å‚¨åŠ è½½æ•°æ®
function loadSavedData() {
    // åŠ è½½æ¨èå®˜ä¿¡æ¯
    const savedReferer = localStorage.getItem('referer');
    if (savedReferer) {
        document.getElementById('refererInput').value = savedReferer;
    }
    
    // åŠ è½½æ¸¸æˆåç§°
    const savedGameName = localStorage.getItem('gameName');
    if (savedGameName) {
        document.getElementById('gameNameInput').value = savedGameName;
    }
    
    // åŠ è½½å¤´åƒ
    const savedAvatarUrl = localStorage.getItem('avatarUrl');
    if (savedAvatarUrl) {
        document.getElementById('avatarPreview').src = savedAvatarUrl;
        document.getElementById('avatarPreview').style.display = 'block';
        document.getElementById('uploadHint').style.display = 'none';
        document.getElementById('successAvatar').src = savedAvatarUrl;
    }
    
    // åŠ è½½æ—¶é—´æ˜¾ç¤ºçŠ¶æ€
    const savedDateTimeVisible = localStorage.getItem('dateTimeVisible');
    if (savedDateTimeVisible !== null) {
        window.dateTimeVisible = savedDateTimeVisible === 'true';
    } else {
        window.dateTimeVisible = true;
    }
    
    // åŠ è½½ä¿å­˜çš„ä¸»é¢˜
    const savedTheme = localStorage.getItem('selectedTheme');
    if (savedTheme) {
        setTheme(savedTheme);
    }
}

// å‡çº§è´¦å·
function upgradeAccount(){
    const id = document.getElementById('gameId').value.trim();
    const name = document.getElementById('gameNameInput').value.trim() || 'ä¼ å¥‡å°æ¸¸æˆ';
    if(!id){
        alert('è¯·è¾“å…¥å‡çº§è´¦å·ï¼');
        return;
    }

    const btn = document.getElementById('upgradeBtn');
    btn.disabled = true;
    btn.innerHTML = 'å‡çº§ä¸­<span class="loading-dots"></span>';

    setTimeout(() => {
        document.querySelector('.success-title').textContent = `${name} å‡çº§æˆåŠŸï¼`;
        document.querySelector('#successText strong').textContent = id;
        document.getElementById('mainPage').style.display = 'none';
        document.getElementById('successPage').style.display = 'block';
        
        createConfetti();
        
        btn.disabled = false;
        btn.innerHTML = 'ç¡®è®¤å‡çº§';
    }, 1000);
}

// è¿”å›é¦–é¡µ
function backToMain(){
    document.getElementById('successPage').style.display = 'none';
    document.getElementById('mainPage').style.display = 'block';
    document.getElementById('gameId').value = '';
    
    const confetti = document.querySelectorAll('.confetti');
    confetti.forEach(c => c.remove());
}

// ui.js å†…å®¹
// ä¸»é¢˜ç›¸å…³åŠŸèƒ½
function initThemeSelector() {
    const themeColors = document.querySelectorAll('.theme-color');
    
    // ä¸ºæ¯ä¸ªä¸»é¢˜é¢œè‰²æ·»åŠ ç‚¹å‡»äº‹ä»¶
    themeColors.forEach(color => {
        color.addEventListener('click', function() {
            // ç§»é™¤æ‰€æœ‰ä¸»é¢˜çš„activeç±»
            themeColors.forEach(c => c.classList.remove('active'));
            // ç»™å½“å‰ç‚¹å‡»çš„ä¸»é¢˜æ·»åŠ activeç±»
            this.classList.add('active');
            
            // è·å–ä¸»é¢˜åç§°å¹¶åº”ç”¨
            const theme = this.getAttribute('data-theme');
            setTheme(theme);
        });
    });
    
    // æ¢å¤ä¸»é¢˜é€‰æ‹©å™¨çš„å±•å¼€çŠ¶æ€
    const isExpanded = localStorage.getItem('themeSelectorExpanded') === 'true';
    if (isExpanded) {
        document.querySelector('.theme-toggle').classList.add('expanded');
        document.querySelector('.theme-selector').classList.add('show');
    }
}

// è®¾ç½®ä¸»é¢˜
function setTheme(theme) {
    // ç§»é™¤æ‰€æœ‰ä¸»é¢˜ç±»
    document.body.className = document.body.className.replace(/theme-\w+/g, '').trim();
    // æ·»åŠ é€‰ä¸­çš„ä¸»é¢˜ç±»
    document.body.classList.add(`theme-${theme}`);
    // ä¿å­˜ä¸»é¢˜åˆ°æœ¬åœ°å­˜å‚¨
    localStorage.setItem('selectedTheme', theme);
    
    // æ›´æ–°ä¸»é¢˜é€‰æ‹©å™¨çš„activeçŠ¶æ€
    const themeColors = document.querySelectorAll('.theme-color');
    themeColors.forEach(color => {
        if (color.getAttribute('data-theme') === theme) {
            color.classList.add('active');
        } else {
            color.classList.remove('active');
        }
    });
}

// åˆ‡æ¢ä¸»é¢˜é€‰æ‹©å™¨çš„æ˜¾ç¤º/éšè—
function toggleThemeSelector() {
    const toggle = document.querySelector('.theme-toggle');
    const selector = document.querySelector('.theme-selector');
    
    toggle.classList.toggle('expanded');
    selector.classList.toggle('show');
    
    // ä¿å­˜ä¸»é¢˜é€‰æ‹©å™¨çš„å±•å¼€çŠ¶æ€
    localStorage.setItem('themeSelectorExpanded', selector.classList.contains('show'));
}

// åˆ‡æ¢æ—¥æœŸæ—¶é—´æ˜¾ç¤º
function toggleDateTime() {
    window.dateTimeVisible = !window.dateTimeVisible;
    document.getElementById('datetime').style.display = window.dateTimeVisible ? 'block' : 'none';
    // ä¿å­˜æ—¶é—´æ˜¾ç¤ºçŠ¶æ€åˆ°æœ¬åœ°å­˜å‚¨
    localStorage.setItem('dateTimeVisible', window.dateTimeVisible);
}

// åˆ›å»ºå½©å¸¦æ•ˆæœ
function createConfetti() {
    // å…ˆæ¸…é™¤å·²æœ‰çš„å½©å¸¦
    const existingConfetti = document.querySelectorAll('.confetti');
    existingConfetti.forEach(confetti => confetti.remove());
    
    // æ ¹æ®å½“å‰ä¸»é¢˜è°ƒæ•´å½©å¸¦é¢œè‰²
    let colors = ['#ff3864', '#ffdd57', '#23d160', '#209cee', '#61dafb', '#a333c8', '#ff9f1c', '#ff2d55'];
    
    // é»‘è‰²ä¸»é¢˜ä½¿ç”¨æ›´æ˜äº®çš„å½©å¸¦é¢œè‰²
    if (document.body.classList.contains('theme-black')) {
        colors = ['#ff416c', '#ffdd57', '#43e97b', '#209cee', '#61dafb', '#ff9f1c', '#ffea00', '#38f9d7'];
    }
    // ç²‰è‰²ä¸»é¢˜ä½¿ç”¨æ›´åŒ¹é…çš„å½©å¸¦é¢œè‰²
    else if (document.body.classList.contains('theme-pink')) {
        colors = ['#ff9a9e', '#fad0c4', '#ffcdd2', '#f8bbd0', '#e1bee7', '#ff80ab', '#ff4081', '#f50057'];
    }
    
    const shapes = ['rectangle', 'circle', 'diamond'];
    const container = document.body;
    
    // åˆ›å»º100ä¸ªå½©å¸¦å…ƒç´ 
    for (let i = 0; i < 100; i++) {
        const confetti = document.createElement('div');
        confetti.classList.add('confetti');
        
        const shape = shapes[Math.floor(Math.random() * shapes.length)];
        confetti.classList.add(shape);
        
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.left = `${Math.random() * 100}vw`;
        confetti.style.animationDelay = `${Math.random() * 1}s`;
        confetti.style.animationDuration = `${Math.random() * 0.5 + 1.5}s`;
        
        const drift = (Math.random() - 0.5) * 100;
        confetti.style.transform = `translateX(${drift}px)`;
        
        container.appendChild(confetti);
        
        // åŠ¨ç”»ç»“æŸåç§»é™¤å…ƒç´ 
        setTimeout(() => {
            confetti.remove();
        }, 2000);
    }
}
</script>
</body>
</html>
